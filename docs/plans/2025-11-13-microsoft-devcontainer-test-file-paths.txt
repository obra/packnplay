MICROSOFT DEVCONTAINER CLI - TEST FILES REFERENCE
================================================

ABSOLUTE PATHS TO KEY TEST FILES:
================================

Main Test Files (4,400 lines total):
-----------------------------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/featuresCLICommands.test.ts (703 lines)
  - CLI commands for testing features
  - Tests: features test, features package, semantic versioning

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/containerFeaturesOrder.test.ts (699 lines)
  - Feature dependency resolution
  - Tests: installsAfter, dependsOn, circular dependencies

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/featureHelpers.test.ts (925 lines)
  - Feature identifier parsing
  - Tests: getSafeId(), processFeatureIdentifier() for all source types

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/lifecycleHooks.test.ts (461 lines)
  - Feature lifecycle command execution
  - Tests: onCreateCommand, postCreateCommand, postStartCommand, postAttachCommand

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/e2e.test.ts (255 lines)
  - End-to-end integration tests
  - Tests: container building, feature installation, command execution

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/generateFeaturesConfig.test.ts (137 lines)
  - Features configuration generation
  - Tests: Dockerfile layer generation, customizations

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/containerFeaturesOCI.test.ts (310 lines)
  - OCI registry reference parsing
  - Tests: getRef(), getCollectionRef() for different reference formats

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/containerFeaturesOCIPush.test.ts (374 lines)
  - Publishing features to OCI registries
  - Tests: registry interaction, tagging, authentication

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/lockfile.test.ts (260 lines)
  - Lockfile functionality for reproducible builds
  - Tests: generation, validation, frozen mode, outdated detection

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/featureAdvisories.test.ts (104 lines)
  - Feature security advisories
  - Tests: version range matching

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/registryCompatibilityOCI.test.ts (172 lines)
  - Registry compatibility testing
  - Tests: multiple registries, auth strategies

Test Utilities:
---------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/testUtils.ts
  - Core test utilities: shellExec, devContainerUp, devContainerDown
  - Logging and output handling
  - CLI parameter construction

Example Feature Sets (15 directories):
--------------------------------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/simple/
  - Basic features (color, hello) for testing

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/a-installs-after-b/
  - Testing installsAfter dependency ordering

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/lifecycle-hooks/
  - Testing lifecycle command execution

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/failing-test/
  - Testing failure scenarios

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/dockerfile-scenario-test/
  - Testing Dockerfile scenario handling

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/autogenerated-set-flags/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/b-installs-after-a/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/remote-user/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/sharing-test-scripts/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/installs-after-advanced/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/renaming-feature/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/dependsOn/
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/dependsOn-and-installsAfter/

Test Configurations (27 directories):
-------------------------------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/configs/

Key config subdirectories:
- feature-dependencies/installsAfter/local-simple/
- feature-dependencies/dependsOn/local-simple/
- lifecycle-hooks-inline-commands/
- lifecycle-hooks-advanced/
- lifecycle-hooks-resume-existing-container/
- dockerfile-with-v2-local-features-config-inside-dev-container-folder/
- dockerfile-with-v2-local-features-config-outside-dev-container-folder/
- dockerfile-with-v2-oci-features/
- image-with-v2-tarball/
- invalid-configs/invalid-v1-features/
- invalid-configs/invalid-v2-features/
- lockfile/
- lockfile-dependson/
- lockfile-frozen/
- lockfile-outdated/
- registry-compatibility/azure-anonymous/
- registry-compatibility/github-anonymous/
- registry-compatibility/azure-registry-scoped/
- registry-compatibility/github-private/

Example Feature Definition:
---------------------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/simple/src/color/devcontainer-feature.json
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/simple/src/color/install.sh
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/simple/src/color/test/test.sh

Root Project Files:
-------------------
/home/jesse/git/packnplay/vendor/devcontainer-cli/package.json
  - Test scripts: npm run test-container-features
  - Dependencies: mocha, chai, typescript, ts-node

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/tsconfig.json
  - TypeScript configuration for tests

KEY FILES TO COPY/PORT:
======================

HIGHEST PRIORITY:
1. testUtils.ts - Core utilities (devContainerUp, shellExec)
2. featureHelpers.test.ts - Feature resolution patterns
3. containerFeaturesOrder.test.ts - Dependency ordering logic
4. lifecycleHooks.test.ts - Lifecycle execution patterns
5. example-v2-features-sets/simple/ - Minimal test fixtures

SECONDARY PRIORITY:
6. e2e.test.ts - Integration test patterns
7. generateFeaturesConfig.test.ts - Config generation
8. containerFeaturesOCI.test.ts - OCI reference parsing

PATTERNS TO REPLICATE:
======================

1. Feature Resolution (from featureHelpers.test.ts):
   - OCI Registry: ghcr.io/devcontainers/features/docker-in-docker:1
   - GitHub Release: owner/repo/feature@version
   - Direct Tarball: https://example.com/path/feature.tgz
   - Local Path: ./color
   - Legacy: docker-in-docker (auto-mapped)

2. Dependency Models (from containerFeaturesOrder.test.ts):
   - installsAfter: ["other-feature"]
   - dependsOn: ["other-feature"]
   - Circular dependency detection

3. Lifecycle Stages (from lifecycleHooks.test.ts):
   - onCreateCommand
   - updateContentCommand
   - postCreateCommand
   - postStartCommand
   - postAttachCommand

4. Feature Options (from examples):
   - string with enum
   - boolean
   - required vs optional

5. Test Structure (all .test.ts files):
   - describe() blocks for test suites
   - it() blocks for individual tests
   - before/after hooks for setup/teardown
   - Mocha timeout settings (120s, 240s, 300s)

COPY ENTIRE DIRECTORIES:
========================
/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/example-v2-features-sets/
  → Use for test fixtures

/home/jesse/git/packnplay/vendor/devcontainer-cli/src/test/container-features/configs/
  → Use for integration test configurations
